
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>CvD_SSP_tools module &#8212; Py-Staff 1.0 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-CvD_SSP_tools">
<span id="cvd-ssp-tools-module"></span><h1>CvD_SSP_tools module<a class="headerlink" href="#module-CvD_SSP_tools" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="CvD_SSP_tools.Spectrum">
<em class="property">class </em><code class="descclassname">CvD_SSP_tools.</code><code class="descname">Spectrum</code><span class="sig-paren">(</span><em>lam=None</em>, <em>lamspec=None</em>, <em>errlamspec=None</em>, <em>age=None</em>, <em>Z=None</em>, <em>wavesyst=None</em>, <em>userdict=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/CvD_SSP_tools.html#Spectrum"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CvD_SSP_tools.Spectrum" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>UPDATE THE DOCSTRING! A stripped down version of specTools in order to package this all together nicely
Author: Ryan Houghton (20/4/11)</p>
<dl class="docutils">
<dt>Purpose: A spectrum object to aid manipulation of wavelength/frequency and the associated</dt>
<dd>flux values</dd>
</dl>
<p>Inputs:
This class MUST be initalised with EITHER</p>
<blockquote>
<div><dl class="docutils">
<dt>lamspec - a NLAMxNSPEC numpy array with [:,0] being the wavelength array (AA) and [:,1:] being</dt>
<dd>the associated flux values (erg/s/cm**2/AA)</dd>
<dt>muspec  - a NLAMxNSPEC numpy array with [:,0] being the frequency array (GHz) and [:,1:] being</dt>
<dd>the associated flux values (GJy = 1e-14 erg/s/cm**2/Hz)</dd>
</dl>
</div></blockquote>
<p>NOTE: 2xN seems a funny way to order the indicies but in numpy, this IS the efficient
way to order the memory elements</p>
<p>Definitions:
Once you have initalised the class with either lamspec or muspec, you will find available
the following variables (no matter if you initalised with lamspec or muspec):</p>
<blockquote>
<div>lam  - the wavelength array (AA)
flam - the associated flux (erg/s/cm**2/AA)
mu   - the frequency array (GHz)
fmu  - the associated flux (GJy = 1e-14 erg/s/cm**2/Hz)</div></blockquote>
<dl class="docutils">
<dt>Functions:</dt>
<dd>calcABmag  - given a filter (spectrum class), return a magnitude on the AB system
calcSTmag  - as above but for the ST system
calcVEGAmag- as above but for the VEGA system; you must also supply a vega <em>spectrum</em></dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li>You can define more than one flam/fmu for each lam/mu</li>
<li>Filters used in the functions should also be <em>spectrum</em> classes</li>
<li>Filters don’t need to be sorted in mu or lam</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="CvD_SSP_tools.checkDims">
<code class="descclassname">CvD_SSP_tools.</code><code class="descname">checkDims</code><span class="sig-paren">(</span><em>var</em>, <em>varname</em>, <em>parentShape</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/CvD_SSP_tools.html#checkDims"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CvD_SSP_tools.checkDims" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="CvD_SSP_tools.load_varelem_CvD16ssps">
<code class="descclassname">CvD_SSP_tools.</code><code class="descname">load_varelem_CvD16ssps</code><span class="sig-paren">(</span><em>dirname='/Data/stellarpops/CvD2'</em>, <em>folder='atlas_rfn_v3'</em>, <em>imf='kroupa'</em>, <em>verbose=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/CvD_SSP_tools.html#load_varelem_CvD16ssps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CvD_SSP_tools.load_varelem_CvD16ssps" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the CvD16 spectra (response functions) with variable elemental abundances.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>dirname</strong> (<em>string</em>) – Base location of the stellar models directory</li>
<li><strong>folder</strong> (<em>string</em>) – The folder inside the base directory which contains the response functions</li>
<li><strong>imf</strong> (<em>string</em>) – The IMF of the response functions. Choices are ‘kroupa’ or ‘salpeter’</li>
<li><strong>verbose</strong> (<em>bool</em>) – Print information to the console</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A dictionary of spectra. See below for example</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">(dict)</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<p>The spectra are returned in a dictionary. The dictionary is indexed by a string referring to the name of the respone function,
e.g. ‘Na+’. At each index, we have a Spectrum class which contains the response functions at various ages and metallicities</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">spectra</span><span class="o">=</span><span class="n">load_varelem_CvD16ssps</span><span class="p">(</span><span class="n">dirname</span><span class="o">=</span><span class="s1">&#39;/path/to/dir&#39;</span><span class="p">,</span> <span class="n">folder</span><span class="o">=</span><span class="s1">&#39;folder&#39;</span><span class="p">,</span> <span class="n">imf</span><span class="o">=</span><span class="s1">&#39;kroupa&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">spectra</span><span class="p">[</span><span class="s1">&#39;Na+&#39;</span><span class="p">]</span> <span class="c1">#Gives all RFs with [Na/H]=+0.3</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="CvD_SSP_tools.prepare_CvD2_element_templates">
<code class="descclassname">CvD_SSP_tools.</code><code class="descname">prepare_CvD2_element_templates</code><span class="sig-paren">(</span><em>templates_lam_range</em>, <em>velscale</em>, <em>elements</em>, <em>verbose=True</em>, <em>element_imf='kroupa'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/CvD_SSP_tools.html#prepare_CvD2_element_templates"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CvD_SSP_tools.prepare_CvD2_element_templates" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="CvD_SSP_tools.prepare_CvD2_templates_twopartIMF">
<code class="descclassname">CvD_SSP_tools.</code><code class="descname">prepare_CvD2_templates_twopartIMF</code><span class="sig-paren">(</span><em>templates_lam_range</em>, <em>velscale</em>, <em>verbose=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/CvD_SSP_tools.html#prepare_CvD2_templates_twopartIMF"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CvD_SSP_tools.prepare_CvD2_templates_twopartIMF" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the CvD16 base spectra, those that vary age, [Z/H] and the IMF. The templates are log-rebinned to have a uniform wavelength
spacing in <strong>log</strong> wavelength, to ensure the difference in velocity between two adjacent pixels is the same, regardless of wavelength.</p>
<p>They are returned in an array of shape (n_ages, n_Zs, n_pixels).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>templates_lam_range</strong> (<em>array-like</em>) – A 2 component vector with the start and stop wavelengths we want for the templates</li>
<li><strong>velscale</strong> (<em>float</em>) – The velocity difference between two adjacent pixels in the log-rebinned spectrum. Use the same value for the templates as you <em>measure</em> from the spectrum!</li>
<li><strong>verbose</strong> (<em>bool</em>) – Print information to the consolse</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><dl class="docutils">
<dt>A two component tuple:</dt>
<dd><ul class="first last simple">
<li>templates (array): An array of templates with shape (N_wavelength, N_ages, N_metallicities, N_imf_x1, N_imf_x2)</li>
<li>logLam_template (array): The log-rebinned wavelength array of the templates</li>
</ul>
</dd>
</dl>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">(tuple)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CvD_SSP_tools.prepare_CvD_correction_interpolators">
<code class="descclassname">CvD_SSP_tools.</code><code class="descname">prepare_CvD_correction_interpolators</code><span class="sig-paren">(</span><em>templates_lam_range</em>, <em>velscale</em>, <em>elements</em>, <em>verbose=True</em>, <em>element_imf='kroupa'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/CvD_SSP_tools.html#prepare_CvD_correction_interpolators"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CvD_SSP_tools.prepare_CvD_correction_interpolators" title="Permalink to this definition">¶</a></dt>
<dd><p>Set up the interpolator for the response functions using the log-rebinned templates we get from <cite>prepare_CvD2_element_templates</cite>.
The response functions allow for variation in a general set of elements (Fe, Ca, Mg, etc), a set of elements which can only be
positive (Mn, K, V, etc), and Sodium, which can be extended from -0.3 dex to +1.0 dex. We have to treat each of these cases
separately, so we end up with three different interpolation objects. You can also vary the effective temperature of the isochrone,
but this is now deprecated in V2.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>templates_lam_range</strong> (<em>array-like</em>) – A 2 component vector with the start and stop wavelengths we want for the templates</li>
<li><strong>velscale</strong> (<em>float</em>) – The velocity difference between two adjacent pixels in the log-rebinned spectrum. Use the same value for the templates as you <em>measure</em> from the spectrum!</li>
<li><strong>elements</strong> (<em>array</em>) – This is an array of integers corresponding to the elements we want to vary in the interpolators. The numbers come from the headings in the SSP RF file. Na is element 1, Ca is element 2, etc. TODO: Improve this! Make it clearer</li>
<li><strong>verbose</strong> (<em>bool</em>) – Print information to the consolse</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><dl class="docutils">
<dt>A two component tuple containing:</dt>
<dd><ul class="first last simple">
<li>correction_interps: A tuple of the interpolators. The order is [general_interp, na_interp, positive_only_interp, T_interp). TODO explain this more</li>
<li>logLam_template: The log-rebinned wavelength array of the templates</li>
</ul>
</dd>
</dl>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">(tuple)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CvD_SSP_tools.prepare_CvD_interpolator_twopartIMF">
<code class="descclassname">CvD_SSP_tools.</code><code class="descname">prepare_CvD_interpolator_twopartIMF</code><span class="sig-paren">(</span><em>templates_lam_range</em>, <em>velscale</em>, <em>verbose=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/CvD_SSP_tools.html#prepare_CvD_interpolator_twopartIMF"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CvD_SSP_tools.prepare_CvD_interpolator_twopartIMF" title="Permalink to this definition">¶</a></dt>
<dd><p>Set up the interpolator for the base SSP spectra using the log-rebinned templates we get from <cite>prepare_CvD2_templates_twopartIMF</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>templates_lam_range</strong> (<em>array-like</em>) – A 2 component vector with the start and stop wavelengths we want for the templates</li>
<li><strong>velscale</strong> (<em>float</em>) – The velocity difference between two adjacent pixels in the log-rebinned spectrum. Use the same value for the templates as you <em>measure</em> from the spectrum!</li>
<li><strong>verbose</strong> (<em>bool</em>) – Print information to the consolse</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><dl class="docutils">
<dt>A two component tuple containing:</dt>
<dd><ul class="first last simple">
<li>interp: the interpolate object. Axes are wavelength, age, Z, imf_x1 and imf_x2</li>
<li>logLam_template: the log-rebinned wavelength array of the templates</li>
</ul>
</dd>
</dl>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">(tuple)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CvD_SSP_tools.singleOrList2Array">
<code class="descclassname">CvD_SSP_tools.</code><code class="descname">singleOrList2Array</code><span class="sig-paren">(</span><em>invar</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/CvD_SSP_tools.html#singleOrList2Array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CvD_SSP_tools.singleOrList2Array" title="Permalink to this definition">¶</a></dt>
<dd><p>If a single value, leave. If a list, convert to array. If array, leave as array.
But for size-1 arrays/lits, convert back to scalar.</p>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Sam Vaughan.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="../_sources/source/CvD_SSP_tools.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>